<link rel="stylesheet" type="text/css" href="project.css">
<h1>Removal Requester</h1>
<?php {$firstname=$_POST['firstname'];$lastname=$_POST['lastname'];$email=$_POST['email'];if(empty($firstname)){echo "<p>Invalid First Name. <p><a href='index.html'>Return to Home Page</a></p></p>";return;}else{if(!preg_match("#^[a-zA-Z]*$#",$firstname)){echo "<p>Invalid First Name. <p><a href='index.html'>Return to Home Page</a></p></p>";return;}}if(empty($lastname)){echo "<p>Invalid Last Name. <p><a href='index.html'>Return to Home Page</a></p></p>";return;}else{if(!preg_match("#^[a-zA-Z]*$#",$lastname)){echo "<p>Invalid Last Name. <p><a href='index.html'>Return to Home Page</a></p></p>";return;}}if(empty($email)){echo "<p>Invalid Email (somehow). <p><a href='index.html'>Return to Home Page</a></p></p>";return;}$query='SELECT * FROM `users` WHERE NOT EXISTS (SELECT null FROM users d WHERE d.Email = "'.$email.'");';echo $query;require"connect.php";try{$stmt=$pdo->prepare($query);$stmt->execute();while($row=$stmt->fetch()){if(empty($row['Email'])){}else{echo "<p>Account does not exist. <p><a href='index.html'>Return to Home Page</a></p></p>";return;}}}catch(Exception $e){echo "<p>Unhandled error occured while checking database.</p>";echo "<p><a href='index.html'>Return to Home Page</a></p>";return;}$msg="First Name: ".$firstname."\nLast Name: ".$lastname."\nEmail: ".$email;$msg=wordwrap($msg,70);mail("tafeteamcrad@gmail.com","Removal Request",$msg);echo "<p>Request was submitted! An admin will handle this request shortly.</p>";echo "<p><a href='index.html'>Return to Home Page</a></p>";}?>